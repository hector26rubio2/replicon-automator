import type { Credentials, CSVRow, AutomationProgress, LogEntry } from '@shared/types';import { LogsCompact } from '../../LogsCompact';import { ExecutionHistoryCompact } from '../../ExecutionHistory';import { useTranslation } from '@/i18n';interface AutomationTabProps {  credentials: Credentials;  onCredentialsChange: (credentials: Credentials) => void;  csvData: CSVRow[] | null;  csvFileName: string | null;  onLoadCSV: () => Promise<void>;  onStartAutomation: () => Promise<void>;  onStopAutomation: () => Promise<void>;  onPauseAutomation: () => Promise<void>;  status: AutomationProgress['status'];  progress: AutomationProgress | null;  isPaused: boolean;  logs: LogEntry[];}export default function AutomationTab({  credentials,  onCredentialsChange,  csvData,  csvFileName,  onLoadCSV,  onStartAutomation,  onStopAutomation,  onPauseAutomation,  status,  progress,  isPaused,  logs,}: AutomationTabProps) {  const { t } = useTranslation();  const isRunning = status === 'running';  const canStart = credentials.email && credentials.password && csvData && csvData.length > 0;  return (    <div className="animate-fade-in h-full flex flex-col">      {}      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1 min-h-0">        {}        <div className="space-y-6 flex flex-col pb-8">          {}          <div className="card">            <h2 className="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2">              <span className="text-2xl">üîê</span>              {t('config.accounts.title')}            </h2>            <div className="grid gap-4">              <div>                <label className="block text-sm text-gray-600 dark:text-slate-400 mb-1">{t('config.accounts.username')}</label>                <input                  type="text"                  value={credentials.email}                  onChange={(e) => {                    window.electronAPI?.sendLogToMain?.('INFO', 'CredentialsInput', `Email onChange: ${e.target.value.length} chars`);                    onCredentialsChange({ ...credentials, email: e.target.value });                  }}                  onFocus={() => {                    window.electronAPI?.sendLogToMain?.('INFO', 'CredentialsInput', 'Email input focused');                  }}                  onKeyDown={(e) => {                    window.electronAPI?.sendLogToMain?.('INFO', 'CredentialsInput', `Email keyDown: ${e.key}`);                  }}                  placeholder="your.email@company.com"                  className="w-full"                  disabled={isRunning}                  aria-label={t('config.accounts.username')}                />              </div>              <div>                <label className="block text-sm text-gray-600 dark:text-slate-400 mb-1">{t('config.accounts.password')}</label>                <input                  type="password"                  value={credentials.password}                  onChange={(e) => {                    window.electronAPI?.sendLogToMain?.('INFO', 'CredentialsInput', `Password onChange: ${e.target.value.length} chars`);                    onCredentialsChange({ ...credentials, password: e.target.value });                  }}                  onFocus={() => {                    window.electronAPI?.sendLogToMain?.('INFO', 'CredentialsInput', 'Password input focused');                  }}                  onKeyDown={(e) => {                    window.electronAPI?.sendLogToMain?.('INFO', 'CredentialsInput', `Password keyDown: ${e.key}`);                  }}                  placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"                  className="w-full"                  disabled={isRunning}                  aria-label={t('config.accounts.password')}                />              </div>              <label className="flex items-center gap-2 cursor-pointer">                <input                  type="checkbox"                  checked={credentials.rememberMe}                  onChange={(e) => onCredentialsChange({ ...credentials, rememberMe: e.target.checked })}                  className="w-4 h-4 rounded border-gray-300 dark:border-slate-600 text-primary-500 focus:ring-primary-500"                  disabled={isRunning}                />                <span className="text-sm text-gray-600 dark:text-slate-400">{t('common.save')} {t('config.accounts.password').toLowerCase()}</span>              </label>            </div>          </div>          {}          <div className="card">            <h2 className="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2">              <span className="text-2xl">üìä</span>              {t('csv.title')}            </h2>            <div className="flex items-center gap-4">              <button onClick={onLoadCSV} className="btn btn-secondary" disabled={isRunning} aria-label={t('csv.loadFile')}>                üìÅ {t('csv.loadFile')}              </button>              <div className="flex-1">                {csvFileName ? (                  <div className="flex items-center gap-3">                    <span className="text-emerald-500 dark:text-emerald-400">‚úì</span>                    <span className="text-gray-900 dark:text-white">{csvFileName}</span>                    <span className="text-gray-500 dark:text-slate-500">({csvData?.length || 0} {t('csv.columns.date').toLowerCase()}s)</span>                  </div>                ) : (                  <span className="text-gray-500 dark:text-slate-500">{t('csv.noData')}</span>                )}              </div>            </div>            {csvData && csvData.length > 0 && (              <div className="mt-4 p-3 bg-gray-100 dark:bg-dark-200 rounded-lg">                <p className="text-sm text-gray-600 dark:text-slate-400 mb-2">{t('common.info')}:</p>                <div className="max-h-32 overflow-auto">                  <table className="w-full text-sm">                    <thead className="text-gray-500 dark:text-slate-400 border-b border-gray-200 dark:border-slate-700">                      <tr>                        <th className="text-left py-1">{t('csv.columns.date')}</th>                        <th className="text-left py-1">{t('automation.accounts')}</th>                        <th className="text-left py-1">{t('csv.columns.project')}</th>                        <th className="text-left py-1">{t('csvEditor.extras')}</th>                      </tr>                    </thead>                    <tbody>                      {csvData.slice(0, 5).map((row, index) => (                        <tr key={index} className="text-gray-700 dark:text-slate-300">                          <td className="py-1">{index + 1}</td>                          <td className="py-1">{row.cuenta}</td>                          <td className="py-1">{row.proyecto}</td>                          <td className="py-1 text-gray-500 dark:text-slate-500">{row.extras || '-'}</td>                        </tr>                      ))}                    </tbody>                  </table>                  {csvData.length > 5 && (                    <p className="text-gray-500 dark:text-slate-500 text-xs mt-2">... {t('common.add')} {csvData.length - 5} {t('csv.columns.date').toLowerCase()}s</p>                  )}                </div>              </div>            )}          </div>          {}          {progress && status !== 'idle' && (            <div className="card border-primary-500/30">              <h2 className="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2">                <span className="text-2xl">üìà</span>                {t('automation.progress')}              </h2>              <div className="space-y-4">                {}                <div>                  <div className="flex justify-between text-sm text-gray-600 dark:text-slate-400 mb-1">                    <span>                      {t('csv.columns.date')} {progress.currentDay} / {progress.totalDays}                    </span>                    <span>{Math.round((progress.currentDay / progress.totalDays) * 100)}%</span>                  </div>                  <div className="h-3 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden">                    <div                      className="h-full bg-gradient-to-r from-primary-500 to-emerald-500 transition-all duration-500"                      style={{ width: `${(progress.currentDay / progress.totalDays) * 100}%` }}                    />                  </div>                </div>                {}                {progress.totalEntries > 0 && (                  <div>                    <div className="flex justify-between text-sm text-gray-600 dark:text-slate-400 mb-1">                      <span>                        {t('csv.addRow')} {progress.currentEntry} / {progress.totalEntries}                      </span>                    </div>                    <div className="h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden">                      <div                        className="h-full bg-primary-400 transition-all duration-300"                        style={{ width: `${(progress.currentEntry / progress.totalEntries) * 100}%` }}                      />                    </div>                  </div>                )}                {}                <p className="text-gray-700 dark:text-slate-300">{progress.message}</p>              </div>            </div>          )}          {}          <div className="card">            <div className="flex gap-4 justify-center">              {!isRunning ? (                <button                  onClick={onStartAutomation}                  disabled={!canStart}                  className={`btn btn-success px-8 py-3 text-lg ${!canStart ? 'opacity-50 cursor-not-allowed' : ''}`}                  aria-label={t('automation.startButton')}                >                  üöÄ {t('automation.startButton')}                </button>              ) : (                <>                  <button onClick={onPauseAutomation} className="btn btn-warning px-6" aria-label={isPaused ? t('common.refresh') : t('common.loading')}>                    {isPaused ? '‚ñ∂Ô∏è ' + t('common.refresh') : '‚è∏Ô∏è ' + t('common.loading').replace('...', '')}                  </button>                  <button onClick={onStopAutomation} className="btn btn-danger px-6" aria-label={t('automation.stopButton')}>                    ‚èπÔ∏è {t('automation.stopButton')}                  </button>                </>              )}            </div>            {!canStart && !isRunning && (              <p className="text-center text-gray-500 dark:text-slate-500 text-sm mt-4">                {!credentials.email || !credentials.password                  ? '‚ö†Ô∏è ' + t('automation.configureFirst')                  : '‚ö†Ô∏è ' + t('csv.loadFirst')}              </p>            )}          </div>        </div>        {}        <div className="h-full flex flex-col space-y-6">          <div className="flex-1 min-h-0">            <LogsCompact logs={logs} />          </div>          <ExecutionHistoryCompact />        </div>      </div>    </div>  );}