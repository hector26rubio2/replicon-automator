import { safeStorage } from 'electron';import Store from 'electron-store';import { createLogger } from '../utils';const logger = createLogger('SecureCredentials');interface EncryptedCredentials {  username: string;   password: string; }const store = new Store<{ encryptedCreds?: EncryptedCredentials }>({  name: 'secure-credentials',});export function isEncryptionAvailable(): boolean {  return safeStorage.isEncryptionAvailable();}export function saveSecureCredentials(username: string, password: string): boolean {  try {    if (!isEncryptionAvailable()) {      logger.warn('Encryption not available, falling back to plain storage');      store.set('encryptedCreds', { username, password });      return true;    }    const encryptedUsername = safeStorage.encryptString(username).toString('base64');    const encryptedPassword = safeStorage.encryptString(password).toString('base64');    store.set('encryptedCreds', {      username: encryptedUsername,      password: encryptedPassword,    });    return true;  } catch (error) {    logger.error('Failed to save secure credentials:', error);    return false;  }}export function loadSecureCredentials(): { username: string; password: string } | null {  try {    const creds = store.get('encryptedCreds');    if (!creds) return null;    if (!isEncryptionAvailable()) {      return creds as { username: string; password: string };    }    const usernameBuffer = Buffer.from(creds.username, 'base64');    const passwordBuffer = Buffer.from(creds.password, 'base64');    const username = safeStorage.decryptString(usernameBuffer);    const password = safeStorage.decryptString(passwordBuffer);    return { username, password };  } catch (error) {    logger.error('Failed to load secure credentials:', error);    return null;  }}export function deleteSecureCredentials(): void {  store.delete('encryptedCreds');}export function hasSecureCredentials(): boolean {  return store.has('encryptedCreds');}export function migrateToSecureStorage(oldUsername: string, oldPassword: string): boolean {  if (!oldUsername || !oldPassword) return false;  const saved = saveSecureCredentials(oldUsername, oldPassword);  return saved;}